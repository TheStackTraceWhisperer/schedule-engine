# UI Automation Testing Guide

This document describes the UI automation testing framework for the Schedule Engine application.

## Overview

The Schedule Engine includes comprehensive UI automation tests using **TestFX**, a JavaFX testing framework. The tests automatically capture screenshots at each step, making them perfect for generating tutorial documentation.

## Features

- **Automated UI Testing**: Tests interact with the application just like a real user would
- **Screenshot Capture**: Every test step is documented with screenshots
- **Headless Mode**: Tests run in CI/CD environments without requiring a display
- **Tutorial Generation**: Screenshots can be used to create step-by-step guides

## Test Structure

### BaseUITest
Base class providing screenshot capture functionality:
- Automatic screenshot numbering
- Timestamped file names
- Headless mode support
- Configurable screenshot directory

### ScheduleEngineUITest
Comprehensive test suite covering:
1. **Application Launch**: Verify all tabs load correctly
2. **Create League**: Add a new league with name and description
3. **Create Teams**: Add multiple teams with coach information
4. **Create Fields**: Add playing field locations
5. **Data Persistence**: Verify data persists across navigation
6. **Menu Functionality**: Test File and Help menus
7. **Refresh Functionality**: Test data refresh

## Running Tests

### Run all tests with screenshots:
```bash
mvn test
```

### Run tests in non-headless mode (requires display):
```bash
mvn test -Dtestfx.headless=false
```

### Run specific test:
```bash
mvn test -Dtest=ScheduleEngineUITest#test01_LaunchApplication
```

## Screenshot Output

Screenshots are saved to: `target/screenshots/`

File naming convention:
```
<TestClass>_<StepNumber>_<Timestamp>_<Description>.png
```

Example:
```
ScheduleEngineUITest_01_20260106_215030_home_screen.png
ScheduleEngineUITest_02_20260106_215031_leagues_tab.png
```

## Using Screenshots for Tutorials

The screenshots generated by these tests can be used to create:

1. **User Guides**: Step-by-step instructions with visual aids
2. **Training Materials**: Onboarding documentation for new users
3. **Feature Documentation**: Visual documentation of application capabilities
4. **Release Notes**: Screenshots showing new features

## Test Annotations

Each test method includes:
- `@Order`: Ensures tests run in sequence
- `@DisplayName`: Descriptive name for the test step
- `captureScreenshot()`: Captures screenshot with description

## Example Test

```java
@Test
@Order(1)
@DisplayName("Step 1: Application launches successfully")
public void test01_LaunchApplication() {
    // Verify home screen
    verifyThat(".label", hasText("Welcome to Schedule Engine"));
    
    // Capture screenshot
    captureScreenshot("home_screen");
    
    // Navigate tabs
    clickOn("Leagues");
    captureScreenshot("leagues_tab");
}
```

## Customization

### Change Screenshot Directory
```bash
mvn test -Dscreenshots.dir=/path/to/screenshots
```

### Add More Test Steps
1. Extend `BaseUITest`
2. Use `captureScreenshot(description)` after each action
3. Use descriptive names for easy tutorial generation

## Dependencies

- **TestFX 4.0.18**: UI automation framework
- **JUnit 5**: Test runner
- **OpenJFX Monocle**: Headless testing support

## Troubleshooting

### Tests fail in headless mode
Set headless to false:
```bash
mvn test -Dtestfx.headless=false
```

### Screenshots not captured
Check permissions on target directory:
```bash
mkdir -p target/screenshots
chmod 755 target/screenshots
```

### JavaFX initialization errors
Ensure Java 21 is being used:
```bash
java -version
```

## Best Practices

1. **Descriptive Names**: Use clear descriptions in `captureScreenshot()`
2. **Wait for Events**: Call `waitForFxEvents()` after UI interactions
3. **Ordered Tests**: Use `@Order` to create logical flow
4. **Meaningful Assertions**: Verify expected behavior at each step
5. **Clean State**: Each test should set up its required data
